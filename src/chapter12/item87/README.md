## 12장 - 직렬화

### <아이템87 > 커스텀 직렬화 형태를 고려해보라

> **(요약)** 클래스를 직렬화하기로 했다면 어떤 직렬화 형태를 사용할지 심사숙고하기 바란다.

개발 일정에 쫓기는 상황에서는 API 설계에 노력을 집중하는 편이 나을 것이다.

먼저 고민해보고 괜찮다고 판단될 때만 기본 직렬화 형태를 사용하라.

객체의 물리적 표현과 논리적 내용이 같다면 기본 직렬화 형태라도 무방하다.

기본 직렬화 형태가 적합하다고 결정했더라도 불변식 보장과 보안을 위해 readObject 메서드를 제공해야 할 때가 많다.

**객체의 물리적 표현과 논리적 표현의 차이가 클 때 기본 직렬화 형태를 사용하면 크게 4 가지 면에서 문제가 생긴다.**

- 공개 API 가 현재의 내부 표현 방식에 영구히 묶인다.
- 너무 많은 공간을 차지할 수 있다.
- 시간이 너무 많이 걸릴 수 있다.
- 스택 오버플로를 일으킬 수 있다.

위와 같은 것들을 위한 합리적인 직렬화 형태는 무엇일까?

원하는 것만 하도록 writeObject 와 readObject 를 구현하면 된다.

코드, [Item87.java](https://github.com/ziippy/EffectiveJava/blob/master/src/chapter12/item87/Item87.java)